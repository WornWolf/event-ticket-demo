<% layout('layout') -%>
<div class="row justify-content-center">
  <div class="col-md-7 col-lg-6">
    <div class="card shadow-soft">
      <div class="card-body p-4">
        <h2 class="mb-3 text-center">สมัครสมาชิก</h2>
        <form
          method="post"
          action="/register"
          class="mt-3"
          onsubmit="return checkPasswords()"
        >
          <div class="row g-3">
            <div class="col-12">
              <label class="form-label">ชื่อบัญชี</label>
              <input
                type="text"
                name="name"
                class="form-control form-control-lg"
                required
              />
            </div>
            <div class="d-none">
              <label class="form-label">บทบาท</label>
              <select name="role" class="form-select form-select-lg">
                <option value="attendee" selected>
                  ผู้เข้าร่วม (Attendee)
                </option>
                <option value="organizer">ผู้จัดอีเวนต์ (Organizer)</option>
              </select>
            </div>
            <div class="col-12">
              <label class="form-label">อีเมล</label>
              <input
                type="email"
                name="email"
                class="form-control form-control-lg"
                required
              />
            </div>

            <!-- รหัสผ่าน -->
            <div class="col-12 position-relative">
              <label class="form-label">รหัสผ่าน</label>
              <div class="input-group">
                <input
                  type="password"
                  id="password"
                  name="password"
                  class="form-control form-control-lg"
                  required
                  oninput="checkPasswordStrength()"
                />

                <i
                  id="togglePasswordIcon"
                  class="bi bi-eye input-group-text"
                  style="cursor: pointer"
                  role="button"
                  onclick="togglePassword('password', 'togglePasswordIcon')"
                ></i>
              </div>
              <div id="passwordStrength" class="mt-1 fw-semibold"></div>
            </div>

            <!-- ยืนยันรหัสผ่าน -->
            <div class="col-12 position-relative">
              <label class="form-label">ยืนยันรหัสผ่าน</label>
              <div class="input-group">
                <input
                  type="password"
                  id="confirmPassword"
                  name="confirmPassword"
                  class="form-control form-control-lg"
                  required
                />
                <i
                  id="toggleConfirmPasswordIcon"
                  class="bi bi-eye input-group-text"
                  style="cursor: pointer"
                  role="button"
                  onclick="togglePassword('confirmPassword', 'toggleConfirmPasswordIcon')"
                ></i>
              </div>
            </div>

            <!-- reCAPTCHA -->
            <div class="col-12 mt-3">
              <div
                class="g-recaptcha"
                data-sitekey="<%= recaptchaSiteKey %>"
              ></div>
            </div>
          </div>

          <button class="btn btn-success w-100 btn-lg mt-3">สมัครสมาชิก</button>
        </form>

        <p class="text-center mt-3 mb-0 small text-muted">
          มีบัญชีอยู่แล้ว?
          <a href="/login" class="text-decoration-none">เข้าสู่ระบบ</a>
        </p>
      </div>
    </div>
  </div>
</div>

<!-- โหลด script reCAPTCHA ของ Google -->
<script src="https://www.google.com/recaptcha/api.js" async defer></script>

<!-- โหลด Bootstrap Icons CDN สำหรับไอคอนตา -->
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css"
/>
<script src="/js/togglePassword.js"></script>
<script src="/js/register.js"></script>
