<% layout('layout') -%>

<div class="container py-5">
  <div class="row justify-content-center">
    <div class="col-md-6 col-lg-5">
      <div class="card shadow-soft">
        <div class="card-body p-4">
          <h2 class="mb-3 text-center">р╕ер╕╖р╕бр╕гр╕лр╕▒р╕кр╕Ьр╣Ир╕▓р╕Щ</h2>

          <% if (typeof message !== 'undefined' && message) { %>
            <div class="alert alert-danger" role="alert">
              <%= message %>
            </div>
          <% } %>

          <!-- р╣Ар╕ер╕╖р╕нр╕Бр╕зр╕┤р╕Шр╕╡ -->
          <div class="text-center mb-3">
            <button type="button" class="btn btn-outline-primary btn-sm me-2" id="useEmailBtn">р╣Гр╕Кр╣Йр╕нр╕╡р╣Ар╕бр╕е</button>
            <button type="button" class="btn btn-outline-secondary btn-sm" id="usePhoneBtn">р╣Гр╕Кр╣Йр╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣М</button>
          </div>

          <form action="/forgot-password" method="POST" class="mt-3" id="forgotForm">
            <!-- Email input -->
            <div class="mb-3 method-field" id="emailField">
              <label class="form-label">р╕нр╕╡р╣Ар╕бр╕е</label>
              <input
                type="email"
                class="form-control form-control-lg"
                placeholder="р╕Бр╕гр╕нр╕Бр╕нр╕╡р╣Ар╕бр╕ер╕Вр╕нр╕Зр╕Др╕╕р╕У"
                id="emailInput"
                value="<%= typeof body !== 'undefined' && body.email ? body.email : '' %>"
              />
            </div>

            <!-- Phone input -->
            <div class="mb-3 method-field d-none" id="phoneField">
              <label class="form-label">р╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣М</label>
              <div class="input-group">
                <select
                  class="form-select form-select-lg"
                  id="countryCode"
                  style="max-width: 120px"
                >
                  <option value="+66" selected>ЁЯЗ╣ЁЯЗн +66</option>
                  <option value="+1">ЁЯЗ║ЁЯЗ╕ +1</option>
                  <option value="+44">ЁЯЗмЁЯЗз +44</option>
                  <option value="+81">ЁЯЗпЁЯЗ╡ +81</option>
                  <option value="+61">ЁЯЗжЁЯЗ║ +61</option>
                  <option value="+86">ЁЯЗиЁЯЗ│ +86</option>
                </select>
                <input
                  type="tel"
                  class="form-control form-control-lg"
                  placeholder="р╣Ар╕Ър╕нр╕гр╣Мр╣Вр╕Чр╕гр╕ир╕▒р╕Юр╕Чр╣М"
                  id="phoneInput"
                  value="<%= typeof body !== 'undefined' && body.phone ? body.phone : '' %>"
                />
              </div>
            </div>

            <!-- Hidden input р╕Чр╕╡р╣Ир╕кр╣Ир╕Зр╕Ир╕гр╕┤р╕З -->
            <input type="hidden" name="identifier" id="identifierInput">

            <button class="btn btn-primary w-100 btn-lg" id="submitBtn">р╕Фр╕│р╣Ар╕Щр╕┤р╕Щр╕Бр╕▓р╕гр╕Хр╣Ир╕н</button>
          </form>

          <p class="text-center mt-3 mb-0 small text-muted">
            <a href="/login" class="text-decoration-none">р╕Бр╕ер╕▒р╕Ър╣Др╕Ыр╕лр╕Щр╣Йр╕▓р╣Ар╕Вр╣Йр╕▓р╕кр╕╣р╣Ир╕гр╕░р╕Ър╕Ъ</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<script src="/js/forgot-password.js"></script>
